{% extends '::base.html.twig' %}

{% block body %}

    {% include 'AcmeBudgetTrackerBundle::navbar.html.twig' with {'var':'Home'} %}

    <div class="little-spacer text-center">

        <h1>Hello, {{app.user.username}}!</h1>

        {# Greeting and introduction to newcommers #}
        {% if newcommer == true %}
        <h3>... and welcome to BudgetTracker!</h3>
        
            <p class="lead big-spacer">
                We suggest you start by 
                <a href="{{ path('categories') }}">creating some categories</a> 
                to help you keep your expenses organised.
            </p>

            <p class="lead">
                Next, you can <a href="{{ path('months') }}">add your budget for the current month.</a>
            </p>

            <p class="lead">
                And then of course - start listing your <a href="{{ path('expenses') }}">expenses</a>.
            </p>

            <p class="lead">
                Whenever you want to see how much you have spent lately and for what -
                you can visit <a href="{{ path('reports') }}">reports section</a>.
                There you will see a list for just the expenses you are interested in.
            </p>

            <p class="lead big-spacer">
               We have other nice features, too... comming soon. 
            </p>
        {% else %}
            
            {{ expenses|yaml_dump }}
            
            {#<div class="big-spacer">
                <h4>Expenses for the month:</h4>
                {% for exp in expenses %}
                    {{ exp|yaml_dump }}
                    {% for e in exp %}
                        {{ e|yaml_dump }}
                        <p>
                            <b>{{ e.product }} - {{ e.price|number_format(2) }}</b> 
                            {#{{ exp.date|date("d-m-Y") }}, {{ exp.category.name }}#}
                       {# </p>
                    {% endfor %}
                {% endfor %}
            </div> #}
            
                 <div class="big-spacer">
                <h4>Expenses for the month:</h4>
                {% set foo = first_cat %}
                {% for e in expenses %}
                        
                        {% if e.category.name == foo %}               
                        <p>
                            <b>{{ e.product }} - {{ e.price|number_format(2) }}</b> 
                            {#{{ exp.date|date("d-m-Y") }}, {{ exp.category.name }}#}
                        </p>
                        {% else %}
                        {{ foo }}
                        {% set foo = e.category.name %}
                        <p>
                            <b>{{ e.product }} - {{ e.price|number_format(2) }}</b> 
                            {#{{ exp.date|date("d-m-Y") }}, {{ exp.category.name }}#}
                        </p>
                        {% endif %}
                {% endfor %}
            </div> 
            
        {% endif %}
 
    </div>

{% endblock %}